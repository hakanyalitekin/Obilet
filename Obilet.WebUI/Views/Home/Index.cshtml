
@{
    ViewBag.Title = "Index";
}


<div class="p-3 mb-3 bg-primary">
    <h5 class="my-0 font-weight-bold text-white">Obilet.com</h5>
</div>

<form action="~/home/FindJourney">
    <div class="form-group">
        <label for="origin" class="font-weight-bold text-primary">Nereden</label>

        <div class="input-group mb-2">
            <div class="input-group-prepend">
                <div class="input-group-text"><i class="fa fa-location-arrow" aria-hidden="true"></i></div>
            </div>

            @Html.DropDownList("origin", (SelectList)ViewBag.busLocationList, new { @id = "origin", @class = "form-control form-control-lg" })
 
        </div>

    </div>
    <div class="form-group">
        <label for="destination" class="font-weight-bold text-primary">Nereye</label>

        <div class="input-group mb-2">
            <div class="input-group-prepend">
                <div class="input-group-text"><i class="fa fa-map-marker" aria-hidden="true"></i></div>
            </div>
            @Html.DropDownList("destination", (SelectList)ViewBag.busLocationList, new { @id = "destination", @class = "form-control form-control-lg" })
        </div>

    </div>

    <div class="form-group">
        <label for="departureDate" class="font-weight-bold text-primary">Tarih</label>

        <div class="input-group mb-2">
            <div class="input-group-prepend">
                <div class="input-group-text"><i class="fa fa-calendar" aria-hidden="true"></i></div>
            </div>
            <input type="datetime-local" class="form-control" id="departureDate" name="departureDate" max="2030-12-31">

            <button type="button" class="btn btn-primary ml-1" onclick="getToday()">Bugün</button>
            <button type="button" class="btn btn-primary ml-1" onclick="getTomorrow()">Yarın</button>

        </div>

    </div>

    <div class="text-center">
        <button type="submit" class="btn btn-primary btn-lg btn-block">Biletimi Bul</button>
    </div>
</form>




<script>

    let today = moment().format("YYYY-MM-DDTHH:mm");
    let tomorrow = moment().add(1, 'days').format("YYYY-MM-DDTHH:mm");

    //HATALI ÇALIŞIYOR KONTROL EDİLECEK.
    //BAŞLA-> iki selecet optionda da aynı konumun seçilememesini sağlıyor.
    var selectedOrigin;
    var selectedDestination;

    function destinationRemove() {
        selectedOrigin = $("#origin option:selected").val();
        $("#destination option[value=" + selectedOrigin + "]").prop("disabled", true); 
        $("#origin option[value=" + selectedOrigin + "]").prop("disabled", false);

    }
    function originRemove() {
        selectedDestination = $("#destination option:selected").val();
        $("#origin option[value=" + selectedDestination + "]").prop("disabled", true); 
        $("#destination option[value=" + selectedDestination + "]").prop("disabled", false);

    }

    $('#origin').change(function () {
        destinationRemove();
    });

    $('#destination').change(function () {
        originRemove();
    });
     //BİT-> iki selecet optionda da aynı konumun seçilememesini sağlıyor.
    
    //BAŞLA -> Bugün - Yarın butonları ile set etme işlemi.
    function getToday() {
        $("#departureDate").val(today);
    }
    function getTomorrow() {
        $("#departureDate").val(tomorrow);
    }
    //BİT -> Bugün - Yarın butonları ile set etme işlemi.

    $(document).ready(function () {

       
        $("#departureDate").attr("min", today); //Tarih seçilirken dünün seçilememesini sağlıyor.

        $("#departureDate").val(today) // Sayfa yüklendikten sonra günün tarihini set ediyor.

        $("#origin").select2({
            theme: 'bootstrap4',
        });

        $("#destination").select2({
            theme: 'bootstrap4',
        });


    });



</script>